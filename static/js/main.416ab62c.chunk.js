(this["webpackJsonppoly-remake"]=this["webpackJsonppoly-remake"]||[]).push([[0],{18:function(e,t,n){e.exports=n(25)},23:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){"use strict";n.r(t);var i,r=n(4),o=n.n(r),a=n(13),s=n.n(a),c=(n(23),n(2)),d=n(0),h=n(5),l=n(6),w=n(15),u=d.k,p=function(e){return void 0===e||null===e},v=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(e){return Object(c.a)(this,n),t.call(this,null!==e&&void 0!==e?e:"Unexpected nil value!")}return n}(Object(w.a)(Error)),f=function e(){var t=this;Object(c.a)(this,e),this.mesh=void 0,this.createStarsGeometry=function(){var e=new d.h;return function(e,t){for(var n=0;n<e;n++)t(n)}(1e3,(function(t){var n=new d.y(u.randFloat(-1,1),u.randFloat(-1,1),u.randFloat(-1,1)),i=u.randFloat(100,500);n.multiplyScalar(i),e.vertices.push(n)})),e},this.mesh=new d.i,[new d.r({color:5592405,size:2,sizeAttenuation:!1}),new d.r({color:5592405,size:1,sizeAttenuation:!1}),new d.r({color:3355443,size:2,sizeAttenuation:!1}),new d.r({color:3815994,size:1,sizeAttenuation:!1}),new d.r({color:1710618,size:2,sizeAttenuation:!1}),new d.r({color:1710618,size:1,sizeAttenuation:!1})].forEach((function(e){var n=t.createStarsGeometry(),i=new d.q(n,e);i.matrixAutoUpdate=!1,i.updateMatrix(),t.mesh.add(i)}))},m=function e(){Object(c.a)(this,e),this.mesh=void 0,this.mesh=new d.i;var t=new d.v(5,16,12),n=new d.m({color:16395051,wireframe:!0}),i=new d.l(t,n);this.mesh.add(i)},b=n(1);!function(e){e.up="up",e.down="down",e.left="left",e.right="right",e.forwards="forwards",e.backwards="backwards",e.rollLeft="rollLeft",e.rollRight="rollRight",e.shoot="shoot"}(i||(i={}));var g=function(){var e;return e={},Object(b.a)(e,i.up,0),Object(b.a)(e,i.down,0),Object(b.a)(e,i.left,0),Object(b.a)(e,i.right,0),Object(b.a)(e,i.forwards,0),Object(b.a)(e,i.backwards,0),Object(b.a)(e,i.rollLeft,0),Object(b.a)(e,i.rollRight,0),Object(b.a)(e,i.shoot,0),e},j=function e(){var t=this;Object(c.a)(this,e),this.moveState=void 0,this.keyMapping=void 0,this.bindKey=function(e,n){t.keyMapping.set(e,n),t.moveState=g()},this.attachListeners=function(){window.addEventListener("keydown",t.keyDownHandler),window.addEventListener("keyup",t.keyUpHandler)},this.dispose=function(){window.addEventListener("keydown",t.keyDownHandler),window.addEventListener("keyup",t.keyUpHandler)},this.keyDownHandler=function(e){var n=t.keyMapping.get(e.code);p(n)||(t.moveState[n]=1)},this.keyUpHandler=function(e){var n=t.keyMapping.get(e.code);p(n)||(t.moveState[n]=0)},this.moveState=g(),this.keyMapping=function(){var e=new Map;return e.set("KeyW",i.up),e.set("KeyS",i.down),e.set("KeyA",i.left),e.set("KeyD",i.right),e.set("KeyI",i.forwards),e.set("KeyK",i.backwards),e.set("KeyJ",i.rollLeft),e.set("KeyL",i.rollRight),e.set("Space",i.shoot),e}()},y=function e(){var t=this;Object(c.a)(this,e),this.clock=void 0,this.delta=void 0,this.tick=function(){t.delta=t.clock.getDelta()},this.clock=new d.e,this.delta=0};y.instance=void 0,y.getInstance=function(){return y.instance||(y.instance=new y),y.instance};var k=function e(t,n){var r=this;Object(c.a)(this,e),this.controls=t,this.object=n,this.clock=void 0,this.moveState=void 0,this.orbitSpeed=void 0,this.rollSpeed=void 0,this.forwardsAndBackwardsSpeed=void 0,this.inertiaFactor=void 0,this.update=function(){r.moveState=function(e,t,n){var r;return r={},Object(b.a)(r,i.up,u.lerp(e[i.up],t[i.up],n)),Object(b.a)(r,i.down,u.lerp(e[i.down],t[i.down],n)),Object(b.a)(r,i.left,u.lerp(e[i.left],t[i.left],n)),Object(b.a)(r,i.right,u.lerp(e[i.right],t[i.right],n)),Object(b.a)(r,i.forwards,u.lerp(e[i.forwards],t[i.forwards],n)),Object(b.a)(r,i.backwards,u.lerp(e[i.backwards],t[i.backwards],n)),Object(b.a)(r,i.rollLeft,u.lerp(e[i.rollLeft],t[i.rollLeft],n)),Object(b.a)(r,i.rollRight,u.lerp(e[i.rollRight],t[i.rollRight],n)),Object(b.a)(r,i.shoot,t[i.shoot]),r}(r.moveState,r.controls.moveState,r.inertiaFactor);var e=r.moveState[i.backwards]-r.moveState[i.forwards];if(Math.abs(e)>1e-5){var t=e*r.forwardsAndBackwardsSpeed,n=r.object.position.length();n+t<15?n=15:n+t>50?n=50:n+=t,r.object.position.setLength(n)}var o=new d.y,a=new d.y,s=new d.y;r.object.matrix.extractBasis(o,a,s);var c=r.moveState[i.up]-r.moveState[i.down],h=r.moveState[i.right]-r.moveState[i.left],l=o.clone();l.multiplyScalar(c);var w=a.clone();w.multiplyScalar(h);var p=(new d.y).addVectors(l,w).clampLength(0,1),v=p.length();v>1e-5&&(p.normalize(),r.object.position.applyAxisAngle(p,v*r.orbitSpeed));var f=r.moveState[i.rollRight]-r.moveState[i.rollLeft];a.applyAxisAngle(s,f*r.rollSpeed),r.object.up.copy(a),r.object.lookAt(0,0,0)},this.clock=y.getInstance(),this.moveState=g(),this.orbitSpeed=.05,this.rollSpeed=.05,this.forwardsAndBackwardsSpeed=.5,this.inertiaFactor=.1,this.update()},S=function e(){Object(c.a)(this,e),this.mesh=void 0,this.createGeometry=function(){var e=new d.d,t=[0,0,1],n=[0,.25,0],i=[-.5,-.25,0],r=[.5,-.25,0],o=new Float32Array([].concat(t,n,i,t,n,r,t,i,r,n,i,r));return e.setAttribute("position",new d.c(o,3)),e};var t=this.createGeometry(),n=new d.m({color:16448250,wireframe:!0});this.mesh=new d.l(t,n),this.mesh.position.set(0,0,50)},O=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,75,window.innerWidth/window.innerHeight,.1,1e3)).followedObject=e,i.clock=void 0,i.distance=void 0,i.inertiaFactor=void 0,i.update=function(){var e=i.followedObject.position.clone();e.add(e.clone().normalize().multiplyScalar(i.distance));var t=(new d.y).lerpVectors(i.position,e,i.inertiaFactor);i.position.copy(t),i.up.copy(i.followedObject.up),i.lookAt(0,0,0)},i.distance=2,i.inertiaFactor=.8,i.clock=y.getInstance(),i.update(),i}return n}(d.o),z=n(14),A=n(17),L=n(16),E=1.05,x=1.2,F=0,H=0,M=function e(t,n){var i=this;Object(c.a)(this,e),this.renderer=void 0,this.composer=void 0,this.getDomElement=function(){return i.renderer.domElement},this.resize=function(){i.renderer.setSize(window.innerWidth,window.innerHeight),i.composer.setSize(window.innerWidth,window.innerHeight)},this.render=function(){i.composer.render()},this.renderer=new d.A,this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.toneMappingExposure=Math.pow(E,4);var r=new z.a(t,n),o=new A.a(new d.x(window.innerWidth,window.innerHeight),1.5,.4,.85);o.threshold=F,o.strength=x,o.radius=H,this.composer=new L.a(this.renderer),this.composer.renderToScreen=!1,this.composer.addPass(r),this.composer.addPass(o),this.composer.renderToScreen=!0},K=new function e(){var t=this;Object(c.a)(this,e),this.renderer=void 0,this.scene=void 0,this.clock=void 0,this.camera=void 0,this.controls=void 0,this.objectController=void 0,this.ship=void 0,this.attachListeners=function(){t.controls.attachListeners(),window.addEventListener("resize",t.resize)},this.dispose=function(){t.controls.dispose(),window.removeEventListener("resize",t.resize)},this.getDomElement=function(){return t.renderer.getDomElement()},this.resize=function(){t.renderer.resize(),t.camera.aspect=window.innerWidth/window.innerHeight,t.camera.updateProjectionMatrix()},this.animate=function(){requestAnimationFrame(t.animate),t.clock.tick(),t.objectController.update(),t.camera.update(),t.renderer.render()},this.scene=new d.t,this.scene.fog=new d.g(0,25e-6),this.clock=y.getInstance(),this.ship=new S,this.scene.add(this.ship.mesh),this.camera=new O(this.ship.mesh),this.renderer=new M(this.scene,this.camera),this.renderer.resize();var n=new d.b(16777215);this.scene.add(n);var i=new f;this.scene.add(i.mesh);var r,o=new m;this.scene.add(o.mesh),this.controls=new j,this.objectController=new k(this.controls,this.ship.mesh),r="Game started!",console.log("%c".concat(r),"\n        background-color: #dadada;\n        color: #2b2bfa;\n        margin: 1em;\n        padding: 0.5em 1em;\n        border-radius: 9999px;\n        font-size: 14px;\n        text-align: center;\n        font-weight: 800;\n    "),this.animate()},D=function(){Object(r.useEffect)((function(){return K.attachListeners(),function(){return K.dispose()}}),[]);return function(e){(function(e,t){if(p(e))throw new v(t);return e})(e).appendChild(K.getDomElement())}};var R=function(){var e=D();return(o.a.createElement("div",{className:"App",ref:e}))};n(24);s.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(R,null)),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.416ab62c.chunk.js.map